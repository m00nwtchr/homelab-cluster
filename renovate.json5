{
	"$schema": "https://docs.renovatebot.com/renovate-schema.json",
	"extends": [
		"config:recommended",
		"docker:enableMajor",
		// ":automergeBranch",
		":disableRateLimiting",
		":dependencyDashboard",
		":semanticCommits",
		":timezone(Europe/Warsaw)",
		// "github>onedr0p/home-ops//.renovate/autoMerge.json5",
		// "github>onedr0p/home-ops//.renovate/customManagers.json5",
		// "github>onedr0p/home-ops//.renovate/grafanaDashboards.json5",
		// "github>onedr0p/home-ops//.renovate/groups.json5",
		// "github>onedr0p/home-ops//.renovate/labels.json5",
		// "github>onedr0p/home-ops//.renovate/packageRules.json5",
		// "github>onedr0p/home-ops//.renovate/semanticCommits.json5"
	],
	"argocd": {
		"fileMatch": [
			"(^|/)charts/.+\\.ya?ml$"
		]
	},
	"helmv3": {
		"fileMatch": [
			"(^|/)charts/.+\\.ya?ml$"
		]
	},
	"helm-values": {
		"fileMatch": [
			"(^|/)charts/.+\\.ya?ml$"
		]
	},
	"kubernetes": {
		"fileMatch": [
			"(^|/)charts/.+\\.ya?ml$",
			"(^|/)apps/.+\\.ya?ml$"
		]
	},
	"customManagers": [
		{
			"customType": "regex",
			"description": "Apply an explicit forgejo digest field match",
			"fileMatch": [
				"forgejo\\.ya?ml"
			],
			"matchStrings": [
				"(?<depName>forgejo\\/forgejo)\\n(?<indentation>\\s+)tag: (?<currentValue>[^@].*?)\\n\\s+digest: (?<currentDigest>sha256:[a-f0-9]+)"
			],
			"datasourceTemplate": "docker",
			"packageNameTemplate": "code.forgejo.org/{{depName}}",
			"autoReplaceStringTemplate": "{{depName}}\n{{indentation}}tag: {{newValue}}\n{{indentation}}digest: {{#if newDigest}}{{{newDigest}}}{{else}}{{{currentDigest}}}{{/if}}"
		}
	]
}
