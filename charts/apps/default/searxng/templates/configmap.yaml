apiVersion: v1
kind: ConfigMap
metadata:
  name: searxng
data:
  settings.yaml: |
    use_default_settings: true

    server:
      limiter: true
      image_proxy: true
      method: GET # https://github.com/searxng/searxng/pull/3619
      public_instance: false

    search:
      autocomplete: duckduckgo
      favicon_resolver: duckduckgo
      languages:
        - all
        - en
        - en-US
        - de
        - pl-PL

    general:
      instance_name: m00nlit.dev Search

    ui:
      default_theme: simple
      infinite_scroll: true
      query_in_title: true
      results_on_new_tab: true
      static_use_hash: true
      theme_args:
        simple_style: auto

    preferences:
      lock:
        - method

    outgoing:
      proxies:
        all://:
          - socks5h://tor-proxy.default.svc:9050
      #  using_tor_proxy: true
      request_timeout: 13
    #  extra_proxy_timeout: 5000

    categories_as_tabs:
      general:
      images:
      videos:
      map:

    enabled_plugins:
      - Basic Calculator
      - Hash plugin
      - Self Information
      - Tracker URL remover
      - Unit converter plugin
      - Ahmia blacklist
      - Hostnames plugin
      - Open Access DOI rewrite

    hostnames:
      high_priority:
        - (.*)\/blog\/(.*)
        - (.*\.)?wikipedia.org$
        - (.*\.)?github.com$
        - (.*\.)?reddit.com$
        - (.*\.)?docker.com$
        - (.*\.)?archlinux.org$
        - (.*\.)?stackoverflow.com$
        - (.*\.)?askubuntu.com$
        - (.*\.)?superuser.com$
  favicons.toml: |
    [favicons]

    cfg_schema = 1   # config's schema version no.

    [favicons.proxy]
    # max_age = 5184000             # 60 days / default: 7 days (604800 sec)

    # [favicons.proxy.resolver_map]
    # "duckduckgo" = "searx.favicons.resolvers.duckduckgo"

    [favicons.cache]
    # db_url = "/var/cache/searxng/faviconcache.db"  # default: "/tmp/faviconcache.db"
    # HOLD_TIME = 5184000                            # 60 days / default: 30 days
    # LIMIT_TOTAL_BYTES = 2147483648                 # 2 GB / default: 50 MB
    # BLOB_MAX_BYTES = 40960                         # 40 KB / default 20 KB
    # MAINTENANCE_MODE = "off"                       # default: "auto"
    # MAINTENANCE_PERIOD = 600                       # 10min / default: 1h
  limiter.toml: |
    [real_ip]

    # Number of values to trust for X-Forwarded-For.

    x_for = 1

    # The prefix defines the number of leading bits in an address that are compared
    # to determine whether or not an address is part of a (client) network.

    ipv4_prefix = 32
    ipv6_prefix = 48

    [botdetection.ip_limit]

    # To get unlimited access in a local network, by default link-lokal addresses
    # (networks) are not monitored by the ip_limit
    filter_link_local = true

    # activate link_token method in the ip_limit method
    link_token = false

    [botdetection.ip_lists]

    # In the limiter, the ip_lists method has priority over all other methods -> if
    # an IP is in the pass_ip list, it has unrestricted access and it is also not
    # checked if e.g. the "user agent" suggests a bot (e.g. curl).

    block_ip = [
    ]

    pass_ip = [
        '192.168.0.0/16', # IPv4 private network
        '10.0.0.0/8', # IPv4 private network
    ]

    # Activate passlist of (hardcoded) IPs from the SearXNG organization,
    # e.g. `check.searx.space`.
    pass_searxng_org = false
