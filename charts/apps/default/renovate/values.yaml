app-template:
  controllers:
    renovate:
      type: cronjob
      cronjob:
        schedule: "@hourly"
      containers:
        app:
          image:
            repository: ghcr.io/renovatebot/renovate
            tag: 40.10.3@sha256:0de769379c09a505f29d01e9d2a2f709f3f871f98dd01e2a8658c42faaa50561
            pullPolicy: IfNotPresent
          envFrom:
            - secretRef:
                name: renovate-secret
          env:
            LOG_LEVEL: debug
            RENOVATE_PLATFORM: 'gitea'
            RENOVATE_ENDPOINT: 'https://git.m00nlit.dev/api/v1'
            RENOVATE_AUTODISCOVER: 'true'
            RENOVATE_GIT_AUTHOR: 'Renovate <renovate@m00nlit.dev>'
            RENOVATE_CONFIG_FILE: '/opt/renovate/config.json'
          resources:
            requests:
              cpu: 250m
              memory: 500Mi
            limits:
              cpu: '2'
              memory: 4Gi
  #  service:
  #    renovate:
  #      controller: renovate
  #      ports:
  #        http:
  #          port: 8080
  persistence:
    config:
      enabled: true
      type: configMap
      name: renovate-config
      globalMounts:
        - path: /opt/renovate/config.json
          subPath: config.json
    cache:
      enabled: true
      type: emptyDir
      globalMounts:
        - path: /tmp/renovate
  #  ingress:
  #    renovate:
  #      enabled: true
  #      hosts:
  #        - host: "renovate.svc.m00nlit.dev"
  #          paths:
  #            - path: /
  #              service:
  #                identifier: renovate
  #                port: http
  configMaps:
    config:
      enabled: true
      data:
        config.json: |-
          {
            onboardingConfig: {
              extends: ['config:recommended'],
            }
          }