replicaCount: 1

image:
  repository: cznic/knot
  tag: latest
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 53

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

readinessProbe:
  enabled: true
livenessProbe:
  enabled: true

dnsConfig:
  zones:
    acme.m00nlit.dev: |
      acme.m00nlit.dev. IN SOA acme.m00nlit.dev. admin.example.com. 1 3600 600 86400 3600
      acme.m00nlit.dev. IN NS acme.m00nlit.dev.
      acme.m00nlit.dev. IN AAAA 2a02:a313:43e4:7080::7dc5
  config: |
    server:
      listen: ::@53

    include: /var/run/secrets/knotdns/*

    acl:
      - id: update_acl
        key: acme_update_key
        action: update

    zone:
      - domain: acme.m00nlit.dev
        acl: update_acl
        storage: /var/lib/knot/zones/
        file: acme.m00nlit.dev.zone

    log:
      - target: stdout
        any: info
